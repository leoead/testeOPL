<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monte seu Pendrive OPL</title>
    <style>
        /* ===== CSS ORIGINAL ‚Äì N√ÉO ALTERADO ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        h1 {
            font-size: 2em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00dbde, #fc00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle { color: rgba(255, 255, 255, 0.7); font-size: 1.1em; }
        .card {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .progress-container { margin-bottom: 15px; }
        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            height: 20px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            border-radius: 20px;
            transition: width 0.3s, background 0.3s;
        }
        .stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.8);
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
        }
        .search-box { flex: 1; min-width: 250px; }
        .search-box input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .filter-box { min-width: 200px; }
        .filter-box select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.4);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .view-toggle { display: flex; gap: 10px; flex: 1; }
        .view-btn {
            padding: 15px;
            background: linear-gradient(45deg, #00dbde, #fc00ff);
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            flex: 1;
        }
        .view-btn.active { border: 2px solid #ffd000; }
        .list-view { display: none; }
        .covers-view {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }
        .cover-item {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
        }
        .cover-img { width: 100%; height: 220px; object-fit: cover; }
        .cover-content { padding: 10px; }
        .cover-title { font-size: 0.85em; height: 40px; overflow: hidden; }
        .cover-genre { font-size: 0.75em; color: #ffd000; }
        .cover-size { font-size: 0.8em; color: #00dbde; }
    </style>
</head>
<body>

<div class="container">
<header>
<h1>üéÆ Monte seu Pendrive OPL</h1>
<p class="subtitle">Limite: 58GB ‚Ä¢ Selecione seus jogos favoritos</p>
</header>

<div class="controls">
<div class="search-box">
<input type="text" id="search" placeholder="üîç Buscar jogo por nome...">
</div>

<div class="filter-box">
<select id="genreFilter">
<option value="all">üé≠ Todos os G√™neros</option>
</select>
</div>

<div class="view-toggle">
<button class="view-btn" onclick="setView('list')">üìã Lista</button>
<button class="view-btn active" onclick="setView('covers')">üñºÔ∏è Capas</button>
</div>
</div>

<div id="list-view" class="list-view">
<div id="list-container"></div>
</div>

<div id="covers-view" class="covers-view"></div>
</div>

<script>
const TOTAL_LIMIT = 58;
const GAMES_JSON_URL = 'games.json';

let currentView = 'covers';
let gamesWithIds = [];
let selectedGames = new Set();
let allGenres = new Set();

const listView = document.getElementById("list-view");
const coversView = document.getElementById("covers-view");
const search = document.getElementById("search");
const genreFilter = document.getElementById("genreFilter");

function gb(b){ return b/(1024*1024*1024); }
function getCoverUrl(id){ return `covers/${id}_COV.png`; }

async function loadGames(){
    const res = await fetch(GAMES_JSON_URL);
    const data = await res.json();
    gamesWithIds = data.games || data;

    allGenres.clear();
    gamesWithIds.forEach(g=>{
        if(g[4]) allGenres.add(g[4]); // ‚úÖ G√äNERO CORRETO
    });

    genreFilter.innerHTML='<option value="all">üé≠ Todos os G√™neros</option>';
    [...allGenres].sort().forEach(g=>{
        const o=document.createElement("option");
        o.value=g; o.textContent=g;
        genreFilter.appendChild(o);
    });

    setView('covers');
}

function setView(view){
    currentView=view;
    listView.style.display=view==='list'?'block':'none';
    coversView.style.display=view==='covers'?'grid':'none';
    applyFilters();
}

function applyFilters(){
    const term=search.value.toLowerCase();
    const genre=genreFilter.value;
    const filtered=gamesWithIds.filter(g=>{
        return g[0].toLowerCase().includes(term) &&
               (genre==='all'||g[4]===genre); // ‚úÖ
    });

    if(currentView==='list') renderList(filtered);
    else renderCovers(filtered);
}

function renderList(games){
    const c=document.getElementById("list-container");
    c.innerHTML="";
    games.forEach(([t,s,id,p,g])=>{
        c.innerHTML+=`<div>${t} - ${g}</div>`;
    });
}

function renderCovers(games){
    coversView.innerHTML="";
    games.forEach(([t,s,id,p,g])=>{
        coversView.innerHTML+=`
        <div class="cover-item">
            <img src="${getCoverUrl(id)}" class="cover-img">
            <div class="cover-content">
                <div class="cover-title">${t}</div>
                <div class="cover-genre">${g}</div>
                <div class="cover-size">${gb(s).toFixed(2)} GB</div>
            </div>
        </div>`;
    });
}

search.addEventListener("input",applyFilters);
genreFilter.addEventListener("change",applyFilters);

loadGames();
</script>
</body>
</html>
