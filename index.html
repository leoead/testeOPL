<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monte seu Pendrive OPL</title>

<!-- âš ï¸ CSS ORIGINAL â€” NÃƒO ALTERADO -->
<style>
/* === TODO O SEU CSS PERMANECE IGUAL === */
</style>
</head>

<body>
<div class="container">
<header>
<h1>ğŸ® Monte seu Pendrive OPL</h1>
<p class="subtitle">Limite: 57GB â€¢ Selecione seus jogos favoritos</p>
</header>

<div class="card">
<div class="progress-container">
<div class="progress-bar">
<div class="progress" id="progress"></div>
</div>
</div>
<div class="stats">
<span><b id="count">0</b> jogos selecionados</span>
<span><b id="used">0</b> GB usados</span>
<span><b id="remaining">58</b> GB livres</span>
</div>
</div>

<div class="controls">
<div class="search-box">
<input type="text" id="search" placeholder="ğŸ” Buscar jogo por nome...">
</div>

<div class="filter-box">
<select id="genreFilter">
<option value="all">ğŸ­ Todos os GÃªneros</option>
<option value="AÃ§Ã£o">ğŸ¯ AÃ§Ã£o</option>
<option value="Aventura">ğŸ—ºï¸ Aventura</option>
<option value="Luta">ğŸ¥Š Luta</option>
<option value="Esporte">âš½ Esporte</option>
<option value="Corrida">ğŸï¸ Corrida</option>
<option value="Terror">ğŸ‘» Terror</option>
<option value="Plataforma">ğŸ® Plataforma</option>
<option value="RPG">âš”ï¸ RPG</option>
<option value="SimulaÃ§Ã£o">ğŸ™ï¸ SimulaÃ§Ã£o</option>
<option value="Emuladores">ğŸ•¹ï¸ Emuladores</option>
<option value="MÃºsica">ğŸµ MÃºsica</option>
<option value="Infantil">ğŸ§¸ Infantil</option>
<option value="CompilaÃ§Ã£o">ğŸ“š CompilaÃ§Ã£o</option>
</select>
</div>

<div class="filter-box">
<select id="sortFilter">
<option value="name">ğŸ“ Ordem AlfabÃ©tica</option>
<option value="size-asc">â¬†ï¸ Tamanho (Menor-Maior)</option>
<option value="size-desc">â¬‡ï¸ Tamanho (Maior-Menor)</option>
</select>
</div>

<div class="view-toggle">
<button class="view-btn" onclick="setView('list')">ğŸ“‹ Lista</button>
<button class="view-btn active" onclick="setView('covers')">ğŸ–¼ï¸ Capas</button>
</div>
</div>

<div class="warning" id="warning"></div>

<div id="list-view" class="list-view">
<div class="game-list-container" id="list-container"></div>
</div>

<div id="covers-view" class="covers-view"></div>
</div>

<script>
const TOTAL_LIMIT = 58;
let currentView = 'covers';
let selectedGames = new Set();

const gamesWithIds = [
["00 ULTIMATE RETRO",2039063700,"MULT_000.91","PS2","Emuladores"],
["007 - EVERYTHING OR NOTHING (USA)",2254119112,"SLUS_207.51","PS2","AÃ§Ã£o"],
["18 WHEELER",313347568,"SLUS_202.10","PS2","Corrida"],
["BLACK",1522718645,"SLUS_213.76","PS2","AÃ§Ã£o"],
["BULLY",3165021328,"SLUS_212.69","PS2","AÃ§Ã£o"],
["BURNOUT 3 - TAKEDOWN (USA)",2438315174,"SLUS_210.50","PS2","Corrida"],
["CALL OF DUTY 3 (USA)",3114922700,"SLUS_214.26","PS2","AÃ§Ã£o"]
];

// OrdenaÃ§Ã£o inicial
gamesWithIds.sort((a,b)=>a[0].localeCompare(b[0],"pt-BR"));

const listView=document.getElementById("list-view");
const coversView=document.getElementById("covers-view");
const search=document.getElementById("search");
const genreFilter=document.getElementById("genreFilter");
const sortFilter=document.getElementById("sortFilter");
const usedSpan=document.getElementById("used");
const remSpan=document.getElementById("remaining");
const countSpan=document.getElementById("count");
const progress=document.getElementById("progress");
const warning=document.getElementById("warning");

function gb(b){return b/(1024*1024*1024);}
function getCoverUrl(id){return `covers/${id}_COV.png`;}

function setView(view){
currentView=view;
document.querySelectorAll('.view-btn').forEach(b=>b.classList.remove('active'));
document.querySelector(`button[onclick="setView('${view}')"]`).classList.add('active');
listView.style.display=view==='list'?'block':'none';
coversView.style.display=view==='covers'?'grid':'none';
applyFilters();
}

function applyFilters(){
const term=search.value.toLowerCase();
const genre=genreFilter.value;
let filtered=gamesWithIds.filter(g=>{
return g[0].toLowerCase().includes(term) &&
(genre==='all'||g[4]===genre);
});
if(sortFilter.value==='name') filtered.sort((a,b)=>a[0].localeCompare(b[0]));
if(sortFilter.value==='size-asc') filtered.sort((a,b)=>a[1]-b[1]);
if(sortFilter.value==='size-desc') filtered.sort((a,b)=>b[1]-a[1]);
currentView==='list'?renderListView(filtered):renderCoversView(filtered);
}

function renderListView(games){
const c=document.getElementById("list-container");
c.innerHTML="";
games.forEach(([t,s,id,p,g])=>{
c.innerHTML+=`
<div class="game-item">
<div class="game-info">
<input type="checkbox" onchange="toggleGame('${id}',${s},this.checked)">
<span class="game-title">${t}</span>
<span class="game-genre">${g}</span>
</div>
<span class="game-size">${gb(s).toFixed(2)} GB</span>
</div>`;
});
}

function renderCoversView(games){
coversView.innerHTML="";
games.forEach(([t,s,id,p,g])=>{
coversView.innerHTML+=`
<div class="cover-item" onclick="toggleGame('${id}',${s},true)">
<img src="${getCoverUrl(id)}" class="cover-img">
<div class="cover-content">
<div class="cover-title">${t}</div>
<div class="cover-genre">${g}</div>
<div class="cover-size">${gb(s).toFixed(2)} GB</div>
</div>
</div>`;
});
}

function toggleGame(id,size,check){
check?selectedGames.add(id):selectedGames.delete(id);
update();applyFilters();
}

function update(){
let total=0;
gamesWithIds.forEach(g=>{if(selectedGames.has(g[2])) total+=g[1];});
usedSpan.textContent=gb(total).toFixed(2);
remSpan.textContent=(TOTAL_LIMIT-gb(total)).toFixed(2);
countSpan.textContent=selectedGames.size;
progress.style.width=Math.min((gb(total)/TOTAL_LIMIT)*100,100)+"%";
}

search.addEventListener("input",applyFilters);
genreFilter.addEventListener("change",applyFilters);
sortFilter.addEventListener("change",applyFilters);

setView('covers');
update();
</script>
</body>
</html>

